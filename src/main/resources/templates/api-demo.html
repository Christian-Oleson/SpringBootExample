<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>API Demo | Spring Boot</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/api-demo.css">
    <script src="/api-demo.js" defer></script>
    <style>
        /* Toast notification styling */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--container-bg);
            color: var(--primary-text);
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            z-index: 1000;
            max-width: 300px;
            border-left: 4px solid var(--accent-color);
        }

        .toast.success {
            border-left-color: var(--success-color);
        }

        .toast.error {
            border-left-color: var(--error-color);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast i {
            font-size: 1.2rem;
        }

        .toast.success i {
            color: var(--success-color);
        }

        .toast.error i {
            color: var(--error-color);
        }

        /* Tooltip styling */
        .tooltip {
            position: absolute;
            background: var(--container-bg);
            color: var(--primary-text);
            padding: 8px 12px;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 0.85rem;
            z-index: 100;
            pointer-events: none;
        }

        /* Custom select styling */
        .custom-select {
            appearance: none;
            background: var(--container-bg);
            color: var(--primary-text);
            padding: 10px 40px 10px 16px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            position: relative;
        }

        .custom-select:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .custom-select option {
            background: var(--container-bg);
            color: var(--primary-text);
        }

        .selector-row {
            display: flex;
            gap: 16px;
            margin-top: 16px;
            margin-bottom: 32px;
        }

        .selector-container {
            flex: 1;
        }

        .accent-btn {
            background: var(--accent-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }

        .accent-btn:hover {
            background: var(--accent-color-hover);
        }

        .params-container {
            margin-top: 16px;
            margin-bottom: 32px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .param-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .param-group label {
            flex: 0 0 120px;
            font-weight: 500;
        }

        .param-group input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            background: var(--container-bg);
            color: var(--primary-text);
            font-size: 1rem;
        }

        .param-group input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .info-text {
            color: var(--secondary-text);
            font-size: 0.9rem;
            margin-bottom: 16px;
            font-style: italic;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header-row">
        <h1>API Demo: Java &amp; Kotlin</h1>
        <div class="theme-toggle">
            <label>
                <input type="checkbox" id="theme-switch" onchange="toggleTheme()">
                <span></span>
                Dark Mode
            </label>
        </div>
    </div>
    <div class="api-sections-row">
        <div class="api-section">
            <h2><i class="bi bi-code-slash"></i> Kotlin Controller</h2>

            <div>
                <span class="api-badge">GET</span>
                <button onclick="callApi('/api/HelloKotlin/hello', 'kotlin-hello-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloKotlin/hello
                </button>
            </div>
            <div class="result" id="kotlin-hello-result"></div>

            <div class="mt-4">
                <span class="api-badge">GET</span>
                <label for="kotlin-greeting-result-input">Name Parameter</label>
                <input id="kotlin-greeting-result-input" placeholder="Enter your name" />
                <button onclick="callApi('/api/HelloKotlin/greeting', 'kotlin-greeting-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloKotlin/greeting
                </button>
            </div>
            <div class="result" id="kotlin-greeting-result"></div>
        </div>

        <div class="api-section">
            <h2><i class="bi bi-cup-hot"></i> Java Controller</h2>

            <div>
                <span class="api-badge">GET</span>
                <button onclick="callApi('/api/HelloJava/hello', 'java-hello-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloJava/hello
                </button>
            </div>
            <div class="result" id="java-hello-result"></div>

            <div class="mt-4">
                <span class="api-badge">GET</span>
                <label for="java-greet-result-input">Name Parameter</label>
                <input id="java-greet-result-input" placeholder="Enter your name" />
                <button onclick="callApi('/api/HelloJava/greet', 'java-greet-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloJava/greet
                </button>
            </div>
            <div class="result" id="java-greet-result"></div>
        </div>
    </div>

    <!-- Exercises Section -->
    <div class="header-row" style="margin-top: 40px;">
        <h1>Building Java Programs</h1>
    </div>

    <p class="info-text">Select a chapter and exercise number to run specific examples. Parameters will appear automatically based on the selected exercise.</p>

    <!-- Add chapter and exercise selector -->
    <div class="api-section">
        <div class="selector-row">
            <div class="selector-container">
                <label for="chapter-select">Select Chapter:</label>
                <select id="chapter-select" class="custom-select" onchange="updateExerciseParams()">
                    <option value="1">Chapter 1</option>
                    <option value="2">Chapter 2</option>
                    <option value="3">Chapter 3</option>
                    <option value="4">Chapter 4</option>
                    <option value="5">Chapter 5</option>
                </select>
            </div>
            <div class="selector-container">
                <label for="exercise-select">Select Exercise:</label>
                <select id="exercise-select" class="custom-select" onchange="updateExerciseParams()">
                    <option value="1">Exercise 1</option>
                    <option value="2">Exercise 2</option>
                    <option value="3">Exercise 3</option>
                    <option value="4">Exercise 4</option>
                    <option value="5">Exercise 5</option>
                </select>
            </div>
            <div class="selector-container">
                <label>&nbsp;</label>
                <button id="dynamic-exercise-btn" class="accent-btn" onclick="callDynamicExercise()">
                    <i class="bi bi-play-fill"></i> Run Selected Exercise
                </button>
            </div>
        </div>

        <!-- Dynamic parameter inputs will appear here -->
        <div id="dynamic-params-container" class="params-container"></div>

        <div class="result" id="dynamic-exercise-result"></div>

        <div class="info-text mt-4">
            <p><strong>Available Exercises:</strong></p>
            <ul>
                <li><strong>Exercise 1:</strong> Display victory message</li>
                <li><strong>Exercise 2:</strong> Generate pattern with specified depth</li>
                <li><strong>Exercise 3:</strong> Read specified file from the filesystem</li>
            </ul>
        </div>
    </div>

    <div class="credit">
        <p>Made with <i class="bi bi-heart-fill" style="color: #e25555;"></i> using Spring Boot, Java, Kotlin &amp; Thymeleaf</p>
        <p>Â© 2025 Christian Oleson</p>
    </div>
</div>
</body>
</html>
