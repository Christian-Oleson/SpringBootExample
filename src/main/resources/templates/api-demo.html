<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>API Demo | Spring Boot</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="/api-demo.css">
    <!-- Modular JavaScript files -->
    <script src="/js/toast.js" defer></script>
    <script src="/js/theme-manager.js" defer></script>
    <script src="/js/api-client.js" defer></script>
    <script src="/js/exercise-manager.js" defer></script>
    <script src="/js/ui-helpers.js" defer></script>
    <script src="/js/api-demo-main.js" defer></script>
</head>
<body>
<div class="container">
    <div class="header-row">
        <h1>API Demo: Java &amp; Kotlin</h1>
        <div class="theme-toggle">
            <label>
                <input type="checkbox" id="theme-switch" onchange="toggleTheme()">
                <span></span>
                Dark Mode
            </label>
        </div>
    </div>
    <div class="api-sections-row">
        <div class="api-section">
            <h2><i class="bi bi-code-slash"></i> Kotlin Controller</h2>

            <div>
                <span class="api-badge">GET</span>
                <button onclick="callApi('/api/HelloKotlin/hello', 'kotlin-hello-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloKotlin/hello
                </button>
            </div>
            <div class="result" id="kotlin-hello-result"></div>

            <div class="mt-4">
                <span class="api-badge">GET</span>
                <label for="kotlin-greeting-result-input">Name Parameter</label>
                <input id="kotlin-greeting-result-input" placeholder="Enter your name" />
                <button onclick="callApi('/api/HelloKotlin/greeting', 'kotlin-greeting-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloKotlin/greeting
                </button>
            </div>
            <div class="result" id="kotlin-greeting-result"></div>
        </div>

        <div class="api-section">
            <h2><i class="bi bi-cup-hot"></i> Java Controller</h2>

            <div>
                <span class="api-badge">GET</span>
                <button onclick="callApi('/api/HelloJava/hello', 'java-hello-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloJava/hello
                </button>
            </div>
            <div class="result" id="java-hello-result"></div>

            <div class="mt-4">
                <span class="api-badge">GET</span>
                <label for="java-greet-result-input">Name Parameter</label>
                <input id="java-greet-result-input" placeholder="Enter your name" />
                <button onclick="callApi('/api/HelloJava/greet', 'java-greet-result')">
                    <i class="bi bi-play-fill"></i> /api/HelloJava/greet
                </button>
            </div>
            <div class="result" id="java-greet-result"></div>
        </div>
    </div>

    <!-- Building Kotlin Programs Section -->
    <div class="header-row">
        <h1>Building Kotlin Programs</h1>
    </div>

    <div class="api-section">
        <h2><i class="bi bi-calculator"></i> Fibonacci Calculator</h2>
        <p class="info-text">Calculate the Fibonacci number at a specified position in the sequence</p>

        <div>
            <span class="api-badge">GET</span>
            <label for="kotlin-fibonacci-result-input">Enter Position</label>
            <input type="number" id="kotlin-fibonacci-result-input" placeholder="Enter a number" min="0" max="30" value="10" />
            <button onclick="callApi('/api/HelloKotlin/fibonacci', 'kotlin-fibonacci-result')">
                <i class="bi bi-play-fill"></i> Calculate Fibonacci
            </button>
        </div>
        <div class="result" id="kotlin-fibonacci-result"></div>
    </div>

    <!-- Exercises Section -->
    <div class="header-row">
        <h1>Building Java Programs</h1>
    </div>

    <p class="info-text">Select a chapter and exercise number to run specific examples. Parameters will appear automatically based on the selected exercise.</p>

    <!-- Add chapter and exercise selector -->
    <div class="api-section">
        <div class="selector-row">
            <div class="selector-container">
                <label for="chapter-select">Select Chapter:</label>
                <select id="chapter-select" class="custom-select" onchange="updateExerciseParams()">
                    <option value="1">Chapter 1</option>
                    <option value="2">Chapter 2</option>
                    <option value="3">Chapter 3</option>
                    <option value="4">Chapter 4</option>
                    <option value="5">Chapter 5</option>
                </select>
            </div>
            <div class="selector-container">
                <label for="exercise-select">Select Exercise:</label>
                <select id="exercise-select" class="custom-select" onchange="updateExerciseParams()">
                    <option value="1">Exercise 1</option>
                    <option value="2">Exercise 2</option>
                    <option value="3">Exercise 3</option>
                    <option value="4">Exercise 4</option>
                    <option value="5">Exercise 5</option>
                </select>
            </div>
            <div class="selector-container">
                <label>&nbsp;</label>
                <button id="dynamic-exercise-btn" class="accent-btn" onclick="callDynamicExercise()">
                    <i class="bi bi-play-fill"></i> Run Selected Exercise
                </button>
            </div>
        </div>

        <!-- Dynamic parameter inputs will appear here -->
        <div id="dynamic-params-container" class="params-container"></div>

        <div class="result" id="dynamic-exercise-result"></div>

        <div class="info-text mt-4">
            <p><strong>Available Exercises:</strong></p>
            <ul>
                <li><strong>Exercise 1:</strong> Display victory message</li>
                <li><strong>Exercise 2:</strong> Generate pattern with specified depth</li>
                <li><strong>Exercise 3:</strong> Read specified file from the filesystem</li>
            </ul>
        </div>
    </div>

    <div class="credit">
        <p>Made with <i class="bi bi-heart-fill" style="color: #e25555;"></i> using Spring Boot, Java, Kotlin &amp; Thymeleaf</p>
        <p>Â© 2025 Christian Oleson</p>
    </div>
</div>
</body>
</html>
